<div class="main-secondary">
<div class="add_user">
    <button  mat-button (click)="openDialog()">
        <mat-icon>add_circle</mat-icon>      Add Secondary User
        
    </button>
    </div>
  <div class="secondary">
  <mat-card class="profile-card" *ngFor="let user of secondaryUsers">
  
      <mat-card-header>
        <mat-card-title>{{user.firstName}} {{user.lastName}}</mat-card-title>
        <mat-card-subtitle>{{user.relationship}}</mat-card-subtitle>
         <ngx-avatar [name]="user.firstName+' '+user.lastName" [bgColor]="user.avatarColor" size=45></ngx-avatar>
      </mat-card-header>
  
  
      <mat-card-content>
          <div class="balance">
              <h3> &#x20B9; {{user.fundsAllocated-user.fundsSpent}}</h3>
          </div>
        <div class="profile-div">
          <mat-icon class="profile-icon" style="color: black;">phone</mat-icon> 
          <span>{{user.mobile}}</span>
        </div>
        <div class="profile-div">
          <mat-icon class="profile-icon" style="color: black;">email</mat-icon> 
        <span>{{user.email}}</span>
        </div>
        <div class="profile-div">
          <mat-icon class="profile-icon" style="color: black;">perm_identity</mat-icon> 
          <span>{{user.gender}}</span>
        </div>
        <div class="profile-div">
          <mat-icon class="profile-icon" style="color: black;">location_on</mat-icon> 
          <span>{{user.bcity}}</span>
        </div>

      </mat-card-content>
       <mat-card-actions >
        <button mat-button *ngIf="user.isActive" class="bg-active" (click)="[activate(user.secondaryId,user.isActive), user.isActive=false]" >Active</button>
        <button mat-button *ngIf="!user.isActive" class="bg-disable" (click)="[activate(user.secondaryId, user.isActive), user.isActive=true]" >Disabled</button>
<ng-container *ngIf="gotPolicies==true">
  <button mat-button *ngIf="!policies.hasOwnProperty(user.secondaryId+'')" class="policy" (click)="openAddPolicy(user.secondaryId, user.firstName)">Add Policy</button>
  <button mat-button *ngIf="policies.hasOwnProperty(user.secondaryId+'')"  class="policy" (click)="openEditPolicy(user.secondaryId, user.firstName)">Edit Policy</button>
</ng-container>
      </mat-card-actions>
    </mat-card>
</div>
</div>
<ngx-spinner></ngx-spinner>